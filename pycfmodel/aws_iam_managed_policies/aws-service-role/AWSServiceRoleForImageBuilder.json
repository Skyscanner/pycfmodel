{"Type": "AWS::IAM::ManagedPolicy", "Arn": "arn:aws:iam::aws:policy/aws-service-role/AWSServiceRoleForImageBuilder", "Condition": null, "CreatePolicy": null, "DeletionPolicy": null, "DependsOn": null, "Metadata": null, "UpdatePolicy": null, "UpdateReplacePolicy": null, "Properties": {"Description": null, "Groups": null, "ManagedPolicyName": "AWSServiceRoleForImageBuilder", "Path": null, "PolicyDocument": {"Condition": null, "Statement": [{"Condition": null, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["autoscaling:DescribeAutoScalingGroups", "autoscaling:DescribeAutoScalingInstances", "autoscaling:SuspendProcesses"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"ForAnyValue:StringEquals": {"autoscaling:ResourceTag/CreatedBy": "EC2 Image Builder"}}, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["autoscaling:DetachInstances", "autoscaling:DeleteAutoScalingGroup"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"ForAnyValue:StringEquals": {"aws:RequestTag/CreatedBy": "EC2 Image Builder"}}, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["autoscaling:CreateAutoScalingGroup"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"ArnLike": {"ec2:LaunchTemplate": "arn:aws:ec2:*:*:launch-template/*"}}, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": "ec2:RunInstances", "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"StringEquals": {"iam:PassedToService": "ec2.amazonaws.com"}}, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": "iam:PassRole", "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"ForAnyValue:StringEquals": {"ec2:ResourceTag/CreatedBy": "EC2 Image Builder"}}, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["ec2:DeleteLaunchTemplate", "ec2:StopInstances", "ec2:TerminateInstances"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": null, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["ec2:CopyImage", "ec2:CreateImage", "ec2:CreateLaunchTemplate", "ec2:DeregisterImage", "ec2:DescribeImages", "ec2:DescribeInstanceAttribute", "ec2:DescribeInstanceStatus", "ec2:DescribeInstances", "ec2:DescribeSubnets", "ec2:DescribeTags", "ec2:ModifyImageAttribute"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": null, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["ec2:CreateTags"], "NotAction": null, "Resource": "arn:aws:ec2:*::image/*", "NotResource": null}, {"Condition": {"ForAnyValue:StringEquals": {"aws:RequestTag/CreatedBy": "EC2 Image Builder"}}, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["ec2:CreateTags"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"StringEquals": {"iam:AWSServiceName": "autoscaling.amazonaws.com"}}, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": "iam:CreateServiceLinkedRole", "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": null, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["license-manager:UpdateLicenseSpecificationsForResource"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": null, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["sns:Publish"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": null, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["ssm:ListCommands", "ssm:ListCommandInvocations", "ssm:AddTagsToResource", "ssm:DescribeInstanceInformation", "ssm:GetAutomationExecution", "ssm:StopAutomationExecution"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": null, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": "ssm:SendCommand", "NotAction": null, "Resource": ["arn:aws:ssm:*:*:document/AWS-RunPowerShellScript", "arn:aws:ssm:*:*:document/AWS-RunShellScript", "arn:aws:ssm:*:*:document/AWSEC2-RunSysprep", "arn:aws:s3:::*"], "NotResource": null}, {"Condition": {"ForAnyValue:StringEquals": {"ssm:resourceTag/CreatedBy": ["EC2 Image Builder"]}}, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["ssm:SendCommand"], "NotAction": null, "Resource": ["arn:aws:ec2:*:*:instance/*"], "NotResource": null}, {"Condition": null, "Sid": null, "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": "ssm:StartAutomationExecution", "NotAction": null, "Resource": "arn:aws:ssm:*:*:automation-definition/ImageBuilder*", "NotResource": null}], "Version": "2012-10-17"}, "Roles": null, "Users": null}}