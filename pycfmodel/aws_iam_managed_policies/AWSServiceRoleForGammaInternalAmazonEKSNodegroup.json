{"Type": "AWS::IAM::ManagedPolicy", "Arn": "arn:aws:iam::aws:policy/AWSServiceRoleForGammaInternalAmazonEKSNodegroup", "Condition": null, "CreatePolicy": null, "DeletionPolicy": null, "DependsOn": null, "Metadata": null, "UpdatePolicy": null, "UpdateReplacePolicy": null, "Properties": {"Description": null, "Groups": null, "ManagedPolicyName": "AWSServiceRoleForGammaInternalAmazonEKSNodegroup", "Path": null, "PolicyDocument": {"Condition": null, "Statement": [{"Condition": {"ForAnyValue:StringLike": {"ec2:ResourceTag/eks": "*"}}, "Sid": "SharedSecurityGroupRelatedPermissions", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["ec2:RevokeSecurityGroupIngress", "ec2:AuthorizeSecurityGroupEgress", "ec2:AuthorizeSecurityGroupIngress", "ec2:DescribeInstances", "ec2:RevokeSecurityGroupEgress", "ec2:DeleteSecurityGroup"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"ForAnyValue:StringLike": {"ec2:ResourceTag/eks:nodegroup-name": "*"}}, "Sid": "EKSCreatedSecurityGroupRelatedPermissions", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["ec2:RevokeSecurityGroupIngress", "ec2:AuthorizeSecurityGroupEgress", "ec2:AuthorizeSecurityGroupIngress", "ec2:DescribeInstances", "ec2:RevokeSecurityGroupEgress", "ec2:DeleteSecurityGroup"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"StringLike": {"ec2:ResourceTag/eks:nodegroup-name": "*"}}, "Sid": "LaunchTemplateRelatedPermissions", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["ec2:DeleteLaunchTemplate", "ec2:CreateLaunchTemplateVersion"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": null, "Sid": "AutoscalingRelatedPermissions", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["autoscaling:UpdateAutoScalingGroup", "autoscaling:DeleteAutoScalingGroup", "autoscaling:TerminateInstanceInAutoScalingGroup", "autoscaling:CompleteLifecycleAction", "autoscaling:PutLifecycleHook", "autoscaling:PutNotificationConfiguration"], "NotAction": null, "Resource": "arn:aws:autoscaling:*:*:*:autoScalingGroupName/eks-*", "NotResource": null}, {"Condition": {"StringEquals": {"iam:AWSServiceName": "autoscaling.amazonaws.com"}}, "Sid": "AllowAutoscalingToCreateSLR", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": "iam:CreateServiceLinkedRole", "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"ForAnyValue:StringEquals": {"aws:TagKeys": ["eks", "eks:cluster-name", "eks:nodegroup-name"]}}, "Sid": "AllowASGCreationByEKS", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["autoscaling:CreateOrUpdateTags", "autoscaling:CreateAutoScalingGroup"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"StringEqualsIfExists": {"iam:PassedToService": "iam.amazonaws.com"}}, "Sid": "AllowPassRoleToIAM", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": "iam:PassRole", "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"StringEqualsIfExists": {"iam:PassedToService": "autoscaling.amazonaws.com"}}, "Sid": "AllowPassRoleToAutoscaling", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": "iam:PassRole", "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": {"StringEqualsIfExists": {"iam:PassedToService": "ec2.amazonaws.com"}}, "Sid": "AllowPassRoleToEC2", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": "iam:PassRole", "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": null, "Sid": "PermissionsToManageResourcesForNodegroups", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["iam:GetRole", "ec2:CreateLaunchTemplate", "ec2:DescribeInstances", "iam:GetInstanceProfile", "ec2:DescribeLaunchTemplates", "autoscaling:DescribeAutoScalingGroups", "ec2:CreateSecurityGroup", "ec2:DescribeLaunchTemplateVersions", "ec2:RunInstances", "ec2:DescribeSecurityGroups", "ec2:GetConsoleOutput", "ec2:DescribeSubnets"], "NotAction": null, "Resource": "*", "NotResource": null}, {"Condition": null, "Sid": "PermissionsToCreateAndManageInstanceProfiles", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["iam:CreateInstanceProfile", "iam:DeleteInstanceProfile", "iam:RemoveRoleFromInstanceProfile", "iam:AddRoleToInstanceProfile"], "NotAction": null, "Resource": "arn:aws:iam::*:instance-profile/eks-*", "NotResource": null}, {"Condition": {"ForAnyValue:StringLike": {"aws:TagKeys": ["eks", "eks:cluster-name", "eks:nodegroup-name", "kubernetes.io/cluster/*"]}}, "Sid": "PermissionsToManageEKSAndKubernetesTags", "Effect": "Allow", "Principal": null, "NotPrincipal": null, "Action": ["ec2:CreateTags", "ec2:DeleteTags"], "NotAction": null, "Resource": "*", "NotResource": null}], "Version": "2012-10-17"}, "Roles": null, "Users": null}}